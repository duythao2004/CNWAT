<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <base href="/CNWAT/" />
    <title>Bài 3 – 2.6 Danh sách</title>
    <link rel="stylesheet" href="bt2/css/style.css" />
    <style>
      .list-card {
        max-width: 840px;
        margin: 0 auto;
      }
      .tbl {
        width: 100%;
        border-collapse: separate;
        border-spacing: 0;
      }
      .tbl th,
      .tbl td {
        padding: 10px 12px;
        border: 1px solid #e5e7eb;
      }
      .tbl th {
        background: #f3f4f6;
        text-align: left;
      }
      /* zebra (bỏ header) */
      .tbl tbody tr:nth-child(odd) {
        background: #ffffff;
      }
      .tbl tbody tr:nth-child(even) {
        background: #f9fafb;
      }
      /* hover xanh + cursor “bàn tay” */
      .tbl tbody tr:hover {
        background: #bbf7d0;
        cursor: pointer;
      }
      /* dòng được chọn */
      .tbl tbody tr.selected {
        background: #fde68a !important;
      }
      /* cột checkbox nhỏ */
      .col-check {
        width: 48px;
        text-align: center;
      }
      .legend {
        margin: 8px 0 0;
        color: #6b7280;
        font-size: 13px;
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <!-- Cột trái -->
      <section class="student">
        <div class="avatar"><img src="bt2/assets/img/me.jpg" alt="" /></div>
        <div>
          <h3>Thông tin sinh viên</h3>
          <p><strong>Họ và tên:</strong> Nguyễn Duy Thảo</p>
          <p><strong>MSSV:</strong> AT190351</p>
        </div>
      </section>

      <!-- Banner -->
      <header class="banner banner--video">
        <video
          class="banner-video"
          autoplay
          muted
          loop
          playsinline
          poster="bt2/assets/img/banner-poster.jpg"
        >
          <source src="bt2/assets/video/banner.webm" type="video/webm" />
          <source src="bt2/assets/video/banner.mp4" type="video/mp4" />
        </video>
      </header>

      <!-- Menu trái -->
      <nav class="menu" aria-label="Menu">
        <h4>Menu</h4>
        <ul>
          <li><a href="bt2/index.html">Trang chủ</a></li>
          <li>
            <a href="bt2/gioi-thieu-ban-than.html">1.1 Giới thiệu bản thân</a>
          </li>
          <li><a href="bt2/bang-diem.html">1.2 Bảng điểm</a></li>
          <li><a href="bt2/ly-lich.html">1.3 Lý lịch</a></li>
          <li><a href="bt2/tin-tuc.html">1.4 Tin tức</a></li>
          <li><a href="bt3/vidu.html">2.1 Ví dụ JS</a></li>
          <li><a href="bt3/trac-nghiem.html">2.2 Thi trắc nghiệm</a></li>
          <li><a href="bt3/nhap-lop.html">2.3 Nhập LOP</a></li>
          <li><a href="bt3/nhap-hoso.html">2.4 Hồ sơ</a></li>
          <li><a href="bt3/form-dang-ky.html">2.5 Form đăng ký</a></li>
          <li><a class="active" href="bt3/danh-sach.html">2.6 Danh sách</a></li>
          <li><a href="bt3/thuc-don.html">2.7 Thực đơn</a></li>
          <li><a href="bt3/tab.html">2.8 Tab</a></li>
          <li><a href="bt3/cay.html">2.9 Cây</a></li>
          <li><a href="bt3/may-tinh.html">2.10. Máy tính</a></li>
          <li><a href="bt3/hoat-anh.html">2.11 Hoạt ảnh</a></li>
          <li><a href="bt3/sap-xep.html">2.12 Sắp xếp</a></li>
          <li><a href="bt4/index.php">3. Bài 4 (PHP & DB)</a></li>
        </ul>
      </nav>

      <!-- MAIN -->
      <main class="main card list-card">
        <h1>Danh sách nhân sự</h1>

        <table class="tbl" aria-describedby="note">
          <thead>
            <tr>
              <th class="col-check">
                <input id="checkAll" type="checkbox" aria-label="Chọn tất cả" />
              </th>
              <th>Họ tên</th>
              <th>Ngày sinh</th>
              <th>Giới tính</th>
            </tr>
          </thead>
          <tbody id="tbody">
            <tr>
              <td class="col-check">
                <input type="checkbox" aria-label="Chọn dòng này" />
              </td>
              <td>Hoàng Thị Thảo</td>
              <td>23/06/1990</td>
              <td>Nữ</td>
            </tr>
            <tr>
              <td class="col-check"><input type="checkbox" /></td>
              <td>Ngô Mạnh Quân</td>
              <td>14/04/1992</td>
              <td>Nam</td>
            </tr>
            <tr>
              <td class="col-check"><input type="checkbox" /></td>
              <td>Nguyễn Thanh Tùng</td>
              <td>27/09/1991</td>
              <td>Nam</td>
            </tr>
            <tr>
              <td class="col-check"><input type="checkbox" /></td>
              <td>Hoàng Thị Ngân</td>
              <td>12/12/1992</td>
              <td>Nữ</td>
            </tr>
          </tbody>
        </table>

        <p id="note" class="legend">
          • Hàng chẵn/lẻ được tô hai màu khác nhau. Di chuột vào một hàng sẽ
          chuyển sang màu xanh lá và con trỏ dạng bàn tay. • Tích checkbox của
          hàng → hàng đó tô vàng. Click vào hàng (trừ tiêu đề) tương đương click
          vào checkbox. • Checkbox ở tiêu đề là “chọn tất cả”; nó tự bật nếu tất
          cả các hàng bên dưới được chọn, và tự tắt nếu còn ít nhất một hàng
          chưa chọn.
        </p>
      </main>

      <footer class="footer">Thông tin bản quyền – © 2025</footer>
    </div>

    <script>
      const tbody = document.getElementById("tbody");
      const checkAll = document.getElementById("checkAll");

      /* cập nhật class .selected theo trạng thái checkbox của row */
      function updateRowSelection(tr) {
        const cb = tr.querySelector('input[type="checkbox"]');
        tr.classList.toggle("selected", cb.checked);
      }

      /* đồng bộ trạng thái checkbox tiêu đề */
      function syncMaster() {
        const cbs = tbody.querySelectorAll('input[type="checkbox"]');
        const allChecked = Array.from(cbs).every((cb) => cb.checked);
        checkAll.checked = allChecked;
      }

      /* toggle khi click vào một row (trừ khi click đúng vào ô checkbox) */
      tbody.addEventListener("click", (e) => {
        const tr = e.target.closest("tr");
        if (!tr) return;
        // nếu click vào chính input thì để event riêng xử lý
        if (e.target.tagName.toLowerCase() !== "input") {
          const cb = tr.querySelector('input[type="checkbox"]');
          cb.checked = !cb.checked;
        }
        updateRowSelection(tr);
        syncMaster();
      });

      /* thay đổi ở từng checkbox con cũng cập nhật màu & master */
      tbody.addEventListener("change", (e) => {
        if (e.target.type === "checkbox") {
          const tr = e.target.closest("tr");
          updateRowSelection(tr);
          syncMaster();
        }
      });

      /* master toggle: chọn/bỏ chọn tất cả */
      checkAll.addEventListener("change", () => {
        const cbs = tbody.querySelectorAll('input[type="checkbox"]');
        cbs.forEach((cb) => {
          cb.checked = checkAll.checked;
          updateRowSelection(cb.closest("tr"));
        });
      });
    </script>
  </body>
</html>
